---
import Root from '~/layouts/Root.astro';
---

<Root title="Homepage">
	<div class="main-container">
		<div id="left" class="section seriuos">
			<div class="logo">
				<a href="/">
					<img src="/img/Logo_BW.png"/>
				</a>
			</div>
			<div class='container'>
				<div class='img background-img'></div>
				<div id="foreImg" class='img foreground-img'></div>
			</div>
			<div class="separator" />
			<diV class="paragraph">
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla rhoncus vestibulum dolor, sed pharetra risus cursus sit amet. Duis non mauris mauris. Etiam eget urna pellentesque, lacinia ligula in, aliquam enim. Nunc molestie bibendum cursus. Praesent eget dui arcu. Integer vestibulum rutrum nulla non dictum. Sed non erat tincidunt odio condimentum vehicula.
				Sed eget nisl eu diam interdum fermentum. Phasellus et purus sit amet augue tempus commodo. Quisque porta dui erat, nec pretium augue ultricies at. Pellentesque viverra vitae odio et lacinia. Donec dapibus porttitor justo, a venenatis sapien scelerisque at. Aenean hendrerit non erat finibus tincidunt. Proin eu volutpat odio, eu condimentum augue. In vel lacus ut nisi maximus finibus et interdum odio. Aenean semper consequat justo, vitae rhoncus nunc mollis in. Curabitur ac ipsum lectus. Vestibulum sem sapien, luctus nec sapien eu, porta congue enim. Donec egestas orci sed odio luctus feugiat. Cras eget eros accumsan urna blandit posuere. Sed rutrum gravida tempus. 
			</diV>
		</div>
		<div id="middle"/>
		<div id="right" class="section playful">
			<div class="logo">
				<a href="/">
					<img src="/img/Logo_Main.png"/>
				</a>
			</div>
			<div class="separator" />
			<diV class="paragraph">
				Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla rhoncus vestibulum dolor, sed pharetra risus cursus sit amet. Duis non mauris mauris. Etiam eget urna pellentesque, lacinia ligula in, aliquam enim. Nunc molestie bibendum cursus. Praesent eget dui arcu. Integer vestibulum rutrum nulla non dictum. Sed non erat tincidunt odio condimentum vehicula.
				Sed eget nisl eu diam interdum fermentum. Phasellus et purus sit amet augue tempus commodo. Quisque porta dui erat, nec pretium augue ultricies at. Pellentesque viverra vitae odio et lacinia. Donec dapibus porttitor justo, a venenatis sapien scelerisque at. Aenean hendrerit non erat finibus tincidunt. Proin eu volutpat odio, eu condimentum augue. In vel lacus ut nisi maximus finibus et interdum odio. Aenean semper consequat justo, vitae rhoncus nunc mollis in. Curabitur ac ipsum lectus. Vestibulum sem sapien, luctus nec sapien eu, porta congue enim. Donec egestas orci sed odio luctus feugiat. Cras eget eros accumsan urna blandit posuere. Sed rutrum gravida tempus. 
			</diV>
		</div>
	</div>
</Root>


<style>

	.main-container{
		display: flex; 
	}

	.section {
		text-align: center;
		font-size: 25px;
		color: #4A4A4A;
		padding: 10px;
		height: 100%;
		width:49.8%;
		min-width: 120px;
	}

	.seriuos{
		background-color:#FFFFFF; 
	}

	.seriuos .logo{
		width: 100%;
	}

	.seriuos .logo img{
		width: 100px;
	}

	.left-img {
		position: absolute;
		margin-left: 20%;
		width: 60%;
	}

	.right-img {
		position: absolute;
		margin-right: 20%;
		width: 60%;
	}

	.playful{
		background-color:#FAF2E4;
		flex: 1 1 0%;
	}

	.playful .logo{
		display: flex;
		width: 100%;
		flex-direction: row-reverse;
	}

	.playful .logo img{
		margin-left: 1%;
		width: 100px;
	}

	#middle{
		background-color:#4A4A4A;
		min-height: 100%;
		width: 0.4%;
		cursor: ew-resize;
		position: relative;
	}

	.separator{
		width: 1px;
		height: 300px;
	}
	
	.container {
		position: absolute;
		width: 99%;
		height: 300px;
		border: 2px solid white;
		.img {
			position: absolute;
			top: 0;
			left: 25%;
			width: 50%;
			height: 100%;
			background-size: auto 100%;
			background-repeat: no-repeat;
		}
		.background-img {
			background-image: url("img/Logo_Main.png");
		}
		.foreground-img {
			background-image: url("img/Logo_BW.png");
			width: 25%;
		}
	}

	.paragraph{
		padding: 6px;
		margin: 15px 50% 0 10%;
		box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
		border-radius: 10px;
		width: 500px;
	}
</style>

<script>
// Query the element
const resizer = document.getElementById('middle');
const leftSide = document.getElementById('left');
const rightSide = document.getElementById('right');
const fore_img = document.getElementById('foreImg');

// The current position of mouse
let x = 0;
let y = 0;

// Width of left and right sides
let leftWidth: number|undefined = 0;
let rightWidth = 0;

let fore_imgWidth = 0;

// Handle the mousedown event
// that's triggered when user drags the resizer
const mouseDownHandler = function (e) {
    // Get the current mouse position
    x = e.clientX;
    y = e.clientY;
    leftWidth = leftSide?.getBoundingClientRect().width;
	rightWidth = rightSide.getBoundingClientRect().width;
	fore_imgWidth = fore_img.getBoundingClientRect().width;

    // Attach the listeners to `document`
    document.addEventListener('mousemove', mouseMoveHandler);
    document.addEventListener('mouseup', mouseUpHandler);
};

// Attach the handler
resizer.addEventListener('mousedown', mouseDownHandler);

const mouseMoveHandler = function (e) {
    // How far the mouse has been moved
    const dx = e.clientX - x;
    const dy = e.clientY - y;

    const newLeftWidth = ((leftWidth + dx) * 99.6) / resizer.parentNode.getBoundingClientRect().width;
    leftSide.style.width = `${newLeftWidth}%`;
	const newRightWidth = ((rightWidth - dx) * 99.6) / resizer.parentNode.getBoundingClientRect().width;
    rightSide.style.width = `${newRightWidth}%`;

	const newFore_imgWidth = ((fore_imgWidth + dx) * 100) / resizer.parentNode.getBoundingClientRect().width;
    fore_img.style.width = `${newFore_imgWidth}%`;

	document.body.style.cursor = 'col-resize';
	leftSide.style.userSelect = 'none';
    leftSide.style.pointerEvents = 'none';

    rightSide.style.userSelect = 'none';
    rightSide.style.pointerEvents = 'none';
};

const mouseUpHandler = function (e) {

    resizer.style.removeProperty('cursor');
    document.body.style.removeProperty('cursor');

    leftSide.style.removeProperty('user-select');
    leftSide.style.removeProperty('pointer-events');

    rightSide.style.removeProperty('user-select');
    rightSide.style.removeProperty('pointer-events');

    // Remove the handlers of `mousemove` and `mouseup`
    document.removeEventListener('mousemove', mouseMoveHandler);
    document.removeEventListener('mouseup', mouseUpHandler);
};
</script>